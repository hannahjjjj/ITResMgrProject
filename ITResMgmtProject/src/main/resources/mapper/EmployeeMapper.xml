<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.kcc.itmgr.domain.employee.dao.IEmployeeRepository">

<select id="selectAllEmployee" resultType = "kr.co.kcc.itmgr.domain.employee.model.Employee">
	<![CDATA[
		SELECT	e.employee_id AS employeeId, 
				e.employee_name AS employeeName,
				(SELECT c.detail_code_name
					FROM commoncodedetail c 
					WHERE c.detail_code = e.employee_type_code) AS employeeType,
				(SELECT c.detail_code_name
					FROM commoncodedetail c 
					WHERE c.detail_code = e.employee_status_code) AS employeeStatus
		FROM employeeinfo e
		WHERE use_yn = 'Y'
		ORDER BY employee_name
	
	]]>
</select>

<!-- <select id="selectSearchEmployee" resultType = "kr.co.kcc.itmgr.domain.employee.model.Employee">
	<![CDATA[
		SELECT	e.employee_id AS employeeId, 
				e.employee_name AS employeeName,
				(SELECT c.detail_code_name
					FROM commoncodedetail c 
					WHERE c.detail_code = e.employee_type_code) AS employeeType,
				(SELECT c.detail_code_name
					FROM commoncodedetail c 
					WHERE c.detail_code = e.employee_status_code) AS employeeStatus
		FROM employeeinfo e
		WHERE use_yn = 'Y' AND
		ORDER BY employeeName
	
]]>
</select> -->

<select id="selectSearchEmployee" resultType = "kr.co.kcc.itmgr.domain.employee.model.Employee">
	<![CDATA[
		SELECT	e.employee_id AS employeeId, 
				e.employee_name AS employeeName,
				(SELECT c.detail_code_name
					FROM commoncodedetail c 
					WHERE c.detail_code = e.employee_type_code) AS employeeType,
				(SELECT c.detail_code_name
					FROM commoncodedetail c 
					WHERE c.detail_code = e.employee_status_code) AS employeeStatus
		FROM employeeinfo e
		WHERE use_yn = 'Y' 
		ORDER BY employeeName
	
]]>
</select>

<insert id="insertEmployee" parameterType="kr.co.kcc.itmgr.domain.employee.model.Employee">
		<foreach collection="list" item="employee" separator=" " open="INSERT ALL" close="SELECT * FROM DUAL">
		INTO employeeinfo
			(employee_id, employee_name, employee_status_code, employee_type_code, create_date, creater_id, employee_pwd, use_yn) 
		VALUES 
				(#{employee.employeeId},
				#{employee.employeeName},
				#{employee.employeeStatusCode},
				#{employee.employeeTypeCode},
				SYSDATE,
				'임시생성자ID',
				'임시비밀번호',
				'Y')
		</foreach>
</insert>


<update id="deleteEmployeeByUseYN" parameterType="String">
	<![CDATA[
		UPDATE employeeinfo
		SET use_yn = 'N'
		WHERE employee_id=#{employeeId}
	]]>
</update>

 
 



</mapper>